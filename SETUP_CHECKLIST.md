# ‚úÖ Setup Checklist

Complete this checklist to ensure your QR Scanner is properly configured.

---

## Pre-Installation ‚òëÔ∏è

- [ ] Node.js 18+ installed
  ```bash
  node --version  # Should be v18 or higher
  ```

- [ ] npm installed
  ```bash
  npm --version
  ```

- [ ] Git installed
  ```bash
  git --version
  ```

---

## MongoDB Atlas Setup ‚òëÔ∏è

- [ ] Created MongoDB Atlas account (https://mongodb.com/cloud/atlas)
- [ ] Created FREE M0 cluster
- [ ] Created database user with password
- [ ] Set database user permission: "Read and write to any database"
- [ ] Configured network access (0.0.0.0/0 for development)
- [ ] Copied connection string
- [ ] Created database: `ticket-scanner`
- [ ] Created collection: `tickets`
- [ ] Inserted at least one sample ticket document

**Test your connection string**:
```bash
# Replace with your actual URI
echo "MONGODB_URI=mongodb+srv://..." >> .env.local
```

---

## Local Development Setup ‚òëÔ∏è

- [ ] Cloned/downloaded project
  ```bash
  cd /Users/admin/Documents/ipoplive2
  ```

- [ ] Installed dependencies
  ```bash
  npm install
  ```

- [ ] Created `.env.local` file
  ```bash
  cp .env.example .env.local
  ```

- [ ] Configured `.env.local` with:
  - [ ] `MONGODB_URI` (from MongoDB Atlas)
  - [ ] `ENCRYPTION_KEY` (32 characters)
  - [ ] `ENCRYPTION_IV` (16 characters)

- [ ] Verified encryption keys match in both:
  - [ ] `.env.local`
  - [ ] `scripts/generate-qr.js`

**Test environment variables**:
```bash
# Should show your variables (not the example values)
cat .env.local
```

---

## QR Code Generation ‚òëÔ∏è

- [ ] Navigated to scripts directory
  ```bash
  cd scripts
  ```

- [ ] Installed QR dependencies
  ```bash
  npm install
  ```

- [ ] Verified encryption keys in `generate-qr.js`
  - [ ] Keys match `.env.local`

- [ ] Generated test QR codes
  ```bash
  node generate-qr.js
  ```

- [ ] Confirmed QR codes created in `scripts/qr-codes/`
  ```bash
  ls -la qr-codes/
  ```

**Expected output**:
```
‚úÖ QR Code generated: /path/to/qr-codes/TKT-001-ABC123.png
‚úÖ QR Code generated: /path/to/qr-codes/TKT-002-DEF456.png
‚úÖ QR Code generated: /path/to/qr-codes/TKT-003-GHI789.png
```

---

## Development Server ‚òëÔ∏è

- [ ] Started development server
  ```bash
  cd /Users/admin/Documents/ipoplive2
  npm run dev
  ```

- [ ] Server running on http://localhost:3000

- [ ] No build errors in terminal

- [ ] Opened http://localhost:3000 in browser

- [ ] Page loaded successfully

**Expected page**:
- Title: "üé´ QR Ticket Scanner"
- Camera selection dropdown (if multiple cameras)
- "Start Scanning" button
- No error messages

---

## Camera & Scanning Test ‚òëÔ∏è

- [ ] Clicked "Start Scanning" button

- [ ] Browser prompted for camera permission

- [ ] Granted camera access

- [ ] Camera feed visible in scanner area

- [ ] Scanned a generated QR code

- [ ] QR code detected and decoded

- [ ] No decryption errors

**If testing on desktop**: Open the QR code image on your phone and scan it with your laptop/desktop camera.

---

## Database Verification ‚òëÔ∏è

- [ ] After scanning, ticket details displayed

- [ ] Status shows as "VALID TICKET" (green)

- [ ] All ticket information visible:
  - [ ] Ticket ID
  - [ ] Payment ID
  - [ ] Name
  - [ ] Email
  - [ ] Other fields

- [ ] "Mark Entry" button visible

**Expected ticket display**:
```
‚úÖ VALID TICKET

Ticket ID: TKT-001-ABC123
Payment ID: PAY-001-ABC123
Name: John Doe
Email: john.doe@example.com
...
```

---

## Mark Entry Test ‚òëÔ∏è

- [ ] Clicked "Mark Entry" button

- [ ] Alert/notification: "Entry marked successfully"

- [ ] Rescanned the same QR code

- [ ] Status now shows "ALREADY USED" (yellow)

- [ ] "Mark Entry" button no longer visible

- [ ] Verified in MongoDB:
  ```bash
  # In MongoDB Atlas ‚Üí Browse Collections
  # Check that "used": true and "used_at" is set
  ```

**Expected second scan**:
```
‚ö†Ô∏è ALREADY USED

This ticket has already been used
Used At: [timestamp]
```

---

## Error Handling Tests ‚òëÔ∏è

### Test 1: Invalid QR Code
- [ ] Scanned a random QR code (not generated by script)
- [ ] Error message: "Invalid QR code - decryption failed"

### Test 2: Ticket Not in Database
- [ ] Generated QR for ticket not in MongoDB
- [ ] Error message: "Ticket not found in database"

### Test 3: Database Connection Error
- [ ] Temporarily set wrong MongoDB URI
- [ ] Error message about database connection

---

## Vercel Deployment Prep ‚òëÔ∏è

- [ ] Created GitHub account

- [ ] Created new repository on GitHub

- [ ] Pushed code to GitHub
  ```bash
  git init
  git add .
  git commit -m "Initial commit"
  git remote add origin https://github.com/YOUR_USERNAME/REPO_NAME.git
  git push -u origin main
  ```

- [ ] Created Vercel account (https://vercel.com)

- [ ] Linked Vercel to GitHub

---

## Vercel Deployment ‚òëÔ∏è

- [ ] Imported project to Vercel

- [ ] Framework preset: Next.js (auto-detected)

- [ ] Added environment variables in Vercel:
  - [ ] `MONGODB_URI`
  - [ ] `ENCRYPTION_KEY`
  - [ ] `ENCRYPTION_IV`

- [ ] Clicked "Deploy"

- [ ] Build completed successfully

- [ ] Visited deployed URL

- [ ] Site loads correctly

- [ ] Camera scanning works on production URL

**Your production URL**: https://__________________.vercel.app

---

## Production Testing ‚òëÔ∏è

- [ ] Opened production URL on mobile device

- [ ] HTTPS verified (should show lock icon)

- [ ] Granted camera permission

- [ ] Scanned test QR code

- [ ] Ticket verified successfully

- [ ] Marked entry successfully

- [ ] Rescanned shows "Already Used"

---

## Optional Enhancements ‚òëÔ∏è

- [ ] Added custom domain in Vercel

- [ ] Set up MongoDB indexes for performance

- [ ] Added more tickets to database

- [ ] Generated real QR codes for event

- [ ] Printed QR codes or sent via email

- [ ] Set up MongoDB backup/export

- [ ] Added monitoring/alerts

- [ ] Documented your specific encryption keys (securely!)

---

## Troubleshooting Guide

### Issue: "Cannot connect to database"
**Solutions**:
1. Check MongoDB URI format
2. Verify password is correct
3. Check IP whitelist (0.0.0.0/0)
4. Ensure database and collection exist

### Issue: "Camera not working"
**Solutions**:
1. Use HTTPS (Vercel provides this)
2. Grant camera permissions
3. Try different browser (Chrome recommended)
4. Check camera not in use by another app

### Issue: "Invalid QR code"
**Solutions**:
1. Verify encryption keys match exactly
2. Check no extra whitespace in keys
3. Regenerate QR codes with correct keys
4. Ensure QR code is not corrupted

### Issue: "Build failed on Vercel"
**Solutions**:
1. Check package.json is valid
2. Verify all files committed to Git
3. Review build logs in Vercel
4. Try deploying again

### Issue: "Module not found"
**Solutions**:
1. Run `npm install` again
2. Delete `node_modules` and `.next`
3. Clear npm cache: `npm cache clean --force`
4. Reinstall: `rm -rf node_modules && npm install`

---

## Support Resources

- **Main Documentation**: [README.md](./README.md)
- **Deployment Guide**: [DEPLOYMENT.md](./DEPLOYMENT.md)
- **API Reference**: [API_REFERENCE.md](./API_REFERENCE.md)
- **Quick Start**: [QUICK_START.md](./QUICK_START.md)

- **Vercel Docs**: https://vercel.com/docs
- **MongoDB Atlas Docs**: https://docs.atlas.mongodb.com
- **Next.js Docs**: https://nextjs.org/docs

---

## ‚úÖ Final Checklist

Once everything above is complete:

- [ ] ‚úÖ Development environment working
- [ ] ‚úÖ QR codes generating correctly
- [ ] ‚úÖ Scanning works locally
- [ ] ‚úÖ Database integration working
- [ ] ‚úÖ Mark entry functionality works
- [ ] ‚úÖ Deployed to Vercel
- [ ] ‚úÖ Production site working
- [ ] ‚úÖ Mobile scanning tested

---

## üéâ Congratulations!

Your QR Ticket Scanner is fully operational!

**Next Steps**:
1. Generate QR codes for your actual event
2. Add all tickets to MongoDB
3. Share production URL with scanning staff
4. Test with your team before event day
5. Monitor logs during the event

**Remember**:
- Keep encryption keys secure and backed up
- Monitor MongoDB Atlas for usage
- Check Vercel logs for any errors
- Have a backup plan (manual entry) ready

---

**Need Help?** Review the documentation or check troubleshooting guides above.

